{% extends "base.html" %}
{% load i18n %}

{% block head %}
<script type="text/javascript">
$(document).ready(function() {

    $('.actor').click(function() {
        var aid = $(this).attr('id').split('-')[1];
        $("#id_actor").val(aid);
        // FIXME
        $('.actor').removeClass('hard-actors-selected');
        $(this).addClass('hard-actors-selected');
    });

    $('.command').click(function() {
        var cid = $(this).attr('id').split('-')[1];
        $("#id_command").val(cid);
        // FIXME
        $('.command').removeClass('hard-command-selected');
        $(this).addClass('hard-command-selected');
    });

    $('#hard-submit').click(function() {
        $.post(
            "/hard/command/add/",
            $("#hard-mode-form").serialize(),
               function( data ) {
                   // FIXME
                   $('.actor').removeClass('hard-actors-selected');
                   $('.command').removeClass('hard-command-selected');
                   $('#id_message').val('');
                   $('#id_actor').val('');
                   $('#id_command').val('');
              });
    });

});
</script>
{% endblock %}

{% block content %}

<form id="hard-mode-form" method="post" action="/hard/command/add/">{% csrf_token %}
    {% for hidden in form.hidden_fields %} {{ hidden }} {% endfor %}
    <div id="hard-actors" class="column grid_6">
        <ul>
        {% for a in actors %}
            <li id="actor-{{ a.id }}" class="actor">{{ a.name }}</li>
        {% endfor %}
        </ul>
    </div>

    <div id="hard-commands" class="column grid_6">
        <ul>
        {% for c in commands %}
            <li id="command-{{ c.id }}" class="command">{{ c.name }}</li>
        {% endfor %}
        </ul>
    </div>
    <div id="hard-commands" class="column grid_6">
        <div class="column grid_4">{{ form.message }}</div>
        <div class="column grid_1"><input type="button" id="hard-submit" value="Submit"></div>
    </div>
</form>

{% endblock %}
